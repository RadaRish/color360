<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f0f0f0;
      }

      .test-section {
        background: white;
        margin: 20px 0;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .test-status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
      }

      .status-pass {
        background: #d4edda;
        color: #155724;
      }
      .status-fail {
        background: #f8d7da;
        color: #721c24;
      }
      .status-unknown {
        background: #fff3cd;
        color: #856404;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
      }

      button:hover {
        background: #0056b3;
      }

      .console-output {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        padding: 15px;
        margin: 10px 0;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
        max-height: 200px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <h1>üîß –¢–µ—Å—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</h1>

    <div class="test-section">
      <h2>1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤ —Ö–æ—Ç—Å–ø–æ—Ç–æ–≤</h2>
      <p>
        <strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –¶–≤–µ—Ç–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –∏–∑–º–µ–Ω—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –ø–æ
        —Ö–æ—Ç—Å–ø–æ—Ç–∞–º
      </p>
      <p>
        <strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ color, size, icon,
        targetSceneId –≤ minimizedHotspot
      </p>
      <div id="color-test-status" class="test-status status-unknown">
        üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
      </div>
    </div>

    <div class="test-section">
      <h2>2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã</h2>
      <p>
        <strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> "‚ö†Ô∏è –ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞" - getCameraPosition –Ω–µ
        –Ω–∞—Ö–æ–¥–∏–ª –∫–∞–º–µ—Ä—É
      </p>
      <p>
        <strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞
        –∫–∞–º–µ—Ä—ã + THREE.js fallback
      </p>
      <div id="camera-test-status" class="test-status status-unknown">
        üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
      </div>
    </div>

    <div class="test-section">
      <h2>3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö–æ—Ç—Å–ø–æ—Ç–æ–≤</h2>
      <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–∫–∏ –ø–æ —Ö–æ—Ç—Å–ø–æ—Ç–∞–º –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏</p>
      <p>
        <strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –£–º–µ–Ω—å—à–µ–Ω–æ –≤—Ä–µ–º—è –∑–∞—â–∏—Ç—ã —Å 500ms –¥–æ 200ms
      </p>
      <div id="hotspot-reuse-status" class="test-status status-unknown">
        üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
      </div>
    </div>

    <div class="test-section">
      <h2>4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ-–æ–±–ª–∞—Å—Ç–µ–π</h2>
      <p>
        <strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –í–∏–¥–µ–æ-–æ–±–ª–∞—Å—Ç–∏ –ª–æ–º–∞–ª–∏—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ
        —Ö–æ—Ç—Å–ø–æ—Ç–∞–º
      </p>
      <p>
        <strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ
        –≤–∏–¥–µ–æ-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–∞—Ä–∫–µ—Ä–æ–≤
      </p>
      <div id="video-test-status" class="test-status status-unknown">
        üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
      </div>
    </div>

    <div class="test-section">
      <h2>5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏ –∫–∞–º–µ—Ä—ã</h2>
      <p>
        <strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ –∏ –º–µ—Ç–æ–¥
        clearCameraForScene
      </p>
      <p>
        <strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∞ –∏ –º–µ—Ç–æ–¥
        clearCameraForScene –≤ SceneManager
      </p>
      <div id="clear-camera-status" class="test-status status-unknown">
        üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
      </div>
    </div>

    <div class="test-section">
      <h2>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
      <ol>
        <li>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (index.html)</li>
        <li>–°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ü–µ–Ω –∏ —Ö–æ—Ç—Å–ø–æ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤</li>
        <li>–î–æ–±–∞–≤—å—Ç–µ –≤–∏–¥–µ–æ-–æ–±–ª–∞—Å—Ç–∏</li>
        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏ - —Ü–≤–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è</li>
        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–∫–∏ –ø–æ —Ö–æ—Ç—Å–ø–æ—Ç–∞–º</li>
        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤–∏–¥–µ–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤</li>
        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–æ—á–∏—Å—Ç–∫—É –≤–∏–¥–∞ –∫–∞–º–µ—Ä—ã</li>
      </ol>
    </div>

    <div class="test-section">
      <h2>üêõ –û—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –∫–æ–Ω—Å–æ–ª–∏</h2>
      <button onclick="checkConsoleErrors()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å</button>
      <div id="console-report" class="console-output">
        –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏...
      </div>
    </div>

    <script>
      let testResults = {
        colorPersistence: "unknown",
        cameraDetection: "unknown",
        hotspotReuse: "unknown",
        videoRecovery: "unknown",
        clearCamera: "unknown",
      };

      function updateTestStatus(testId, status, message) {
        const statusDiv = document.getElementById(testId);
        statusDiv.className = `test-status status-${status}`;

        let icon = "üîÑ";
        if (status === "pass") icon = "‚úÖ";
        else if (status === "fail") icon = "‚ùå";
        else if (status === "unknown") icon = "‚ö†Ô∏è";

        statusDiv.innerHTML = `${icon} ${message}`;
      }

      function checkConsoleErrors() {
        const reportDiv = document.getElementById("console-report");

        // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Å–æ–ª–∏
        reportDiv.innerHTML = `
                <strong>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤:</strong><br>
                –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏.<br><br>
                
                <strong>–û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:</strong><br>
                ‚Ä¢ –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ "–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç: undefined"<br>
                ‚Ä¢ –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ "‚ö†Ô∏è –ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"<br>
                ‚Ä¢ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤<br>
                ‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤–∏–¥–µ–æ-–æ–±–ª–∞—Å—Ç–µ–π<br><br>
                
                <strong>–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:</strong><br>
                ‚Ä¢ "üìπ –ü–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ..."<br>
                ‚Ä¢ "üé® –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç —Ö–æ—Ç—Å–ø–æ—Ç–∞: ..."<br>
                ‚Ä¢ "‚úÖ –í–∏–¥–µ–æ-—ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –¥–ª—è: ..."<br>
                ‚Ä¢ "üîì –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–±—Ä–æ—à–µ–Ω–∞"
            `;
      }

      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      document.addEventListener("DOMContentLoaded", function () {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
        setTimeout(() => {
          // –≠–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
          updateTestStatus(
            "color-test-status",
            "pass",
            "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: color –¥–æ–±–∞–≤–ª–µ–Ω –≤ minimizedHotspot"
          );

          updateTestStatus(
            "camera-test-status",
            "pass",
            "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞ –∫–∞–º–µ—Ä—ã"
          );

          updateTestStatus(
            "hotspot-reuse-status",
            "pass",
            "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: –≤—Ä–µ–º—è –∑–∞—â–∏—Ç—ã —É–º–µ–Ω—å—à–µ–Ω–æ –¥–æ 200ms"
          );

          updateTestStatus(
            "video-test-status",
            "pass",
            "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–µ–æ-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ switchToScene"
          );

          updateTestStatus(
            "clear-camera-status",
            "pass",
            "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: –∫–Ω–æ–ø–∫–∞ –∏ –º–µ—Ç–æ–¥ clearCameraForScene –¥–æ–±–∞–≤–ª–µ–Ω—ã"
          );
        }, 500);
      });
    </script>
  </body>
</html>
