<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç –∫–Ω–æ–ø–æ–∫ –∑—É–º–∞</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        background: #1a1a1a;
        color: white;
        padding: 20px;
      }
      .test-section {
        background: #333;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }
      .zoom-controls {
        display: flex;
        gap: 10px;
        margin: 20px 0;
      }
      button {
        padding: 10px 20px;
        background: #0066cc;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        background: #0055aa;
      }
      .log {
        background: #222;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
        font-family: monospace;
        max-height: 200px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <h1>–¢–µ—Å—Ç –∫–Ω–æ–ø–æ–∫ –∑—É–º–∞</h1>

    <div class="test-section">
      <h2>–°–∏–º—É–ª—è—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –∑—É–º–∞</h2>
      <div class="zoom-controls">
        <button id="zoom-in-btn">üîç+ –£–≤–µ–ª–∏—á–∏—Ç—å</button>
        <button id="zoom-out-btn">üîç- –£–º–µ–Ω—å—à–∏—Ç—å</button>
        <button id="zoom-reset-btn">üéØ –°–±—Ä–æ—Å</button>
      </div>
      <div>–¢–µ–∫—É—â–∏–π FOV: <span id="fov-display">80</span>¬∞</div>
    </div>

    <div class="test-section">
      <h2>–ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</h2>
      <div id="log" class="log"></div>
      <button onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å –∂—É—Ä–Ω–∞–ª</button>
    </div>

    <script>
      let currentFov = 80;

      function log(message) {
        const logElement = document.getElementById("log");
        const time = new Date().toLocaleTimeString();
        logElement.innerHTML += `[${time}] ${message}<br>`;
        logElement.scrollTop = logElement.scrollHeight;
      }

      function updateFovDisplay() {
        document.getElementById("fov-display").textContent =
          currentFov.toFixed(1);
      }

      function clearLog() {
        document.getElementById("log").innerHTML = "";
      }

      // –°–∏–º—É–ª—è—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –∑—É–º–∞
      const mockViewerManager = {
        zoomIn: function () {
          const zoomStep = 5;
          const oldFov = currentFov;
          currentFov = Math.max(10, currentFov - zoomStep);
          updateFovDisplay();
          log(
            `üîç –ó—É–º –∫–Ω–æ–ø–∫–æ–π +: FOV ${oldFov.toFixed(1)}¬∞ ‚Üí ${currentFov.toFixed(1)}¬∞`
          );
        },

        zoomOut: function () {
          const zoomStep = 5;
          const oldFov = currentFov;
          currentFov = Math.min(130, currentFov + zoomStep);
          updateFovDisplay();
          log(
            `üîç –ó—É–º –∫–Ω–æ–ø–∫–æ–π -: FOV ${oldFov.toFixed(1)}¬∞ ‚Üí ${currentFov.toFixed(1)}¬∞`
          );
        },

        resetZoom: function () {
          const oldFov = currentFov;
          currentFov = 80;
          updateFovDisplay();
          log(`üîç –°–±—Ä–æ—Å –∑—É–º–∞: FOV ${oldFov.toFixed(1)}¬∞ ‚Üí 80.0¬∞`);
        },
      };

      // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ (–∫–∞–∫ –≤ main.js)
      document.addEventListener("DOMContentLoaded", function () {
        log("üöÄ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –ø–æ–¥–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏...");

        const zoomInBtn = document.getElementById("zoom-in-btn");
        const zoomOutBtn = document.getElementById("zoom-out-btn");
        const zoomResetBtn = document.getElementById("zoom-reset-btn");

        if (zoomInBtn) {
          zoomInBtn.onclick = () => {
            log('üéØ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–£–≤–µ–ª–∏—á–∏—Ç—å"');
            mockViewerManager.zoomIn();
          };
          log('‚úÖ –ö–Ω–æ–ø–∫–∞ "–£–≤–µ–ª–∏—á–∏—Ç—å" –ø–æ–¥–∫–ª—é—á–µ–Ω–∞');
        } else {
          log('‚ùå –ö–Ω–æ–ø–∫–∞ "–£–≤–µ–ª–∏—á–∏—Ç—å" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        }

        if (zoomOutBtn) {
          zoomOutBtn.onclick = () => {
            log('üéØ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–£–º–µ–Ω—å—à–∏—Ç—å"');
            mockViewerManager.zoomOut();
          };
          log('‚úÖ –ö–Ω–æ–ø–∫–∞ "–£–º–µ–Ω—å—à–∏—Ç—å" –ø–æ–¥–∫–ª—é—á–µ–Ω–∞');
        } else {
          log('‚ùå –ö–Ω–æ–ø–∫–∞ "–£–º–µ–Ω—å—à–∏—Ç—å" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        }

        if (zoomResetBtn) {
          zoomResetBtn.onclick = () => {
            log('üéØ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "–°–±—Ä–æ—Å"');
            mockViewerManager.resetZoom();
          };
          log('‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å" –ø–æ–¥–∫–ª—é—á–µ–Ω–∞');
        } else {
          log('‚ùå –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
        }

        log("üéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞");
      });

      // –¢–µ—Å—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏–π
      document.addEventListener("keydown", (e) => {
        if (e.key === "+" || e.key === "=") {
          log('‚å®Ô∏è –ù–∞–∂–∞—Ç–∞ –∫–ª–∞–≤–∏—à–∞ "+"');
          mockViewerManager.zoomIn();
        } else if (e.key === "-") {
          log('‚å®Ô∏è –ù–∞–∂–∞—Ç–∞ –∫–ª–∞–≤–∏—à–∞ "-"');
          mockViewerManager.zoomOut();
        }
      });

      log("üìã –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –∏ –∫–ª–∞–≤–∏—à–∏ +/-");
    </script>
  </body>
</html>
